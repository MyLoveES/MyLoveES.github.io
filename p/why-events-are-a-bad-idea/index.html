<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Why Events Are A Bad Idea è®ºç‚¹ï¼šçº¿ç¨‹å¯ä»¥å®ç°äº‹ä»¶çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒ…æ‹¬æ”¯æŒé«˜å¹¶å‘æ€§ã€ä½å¼€é”€å’Œç®€å•çš„å¹¶å‘æ¨¡å‹ã€‚æ­¤å¤–ï¼Œçº¿ç¨‹å…è®¸æ›´ç®€å•å’Œæ›´è‡ªç„¶çš„ç¼–ç¨‹é£æ ¼ã€‚ åŸæ–‡ Specifically, we believe that threads can achieve all of the strengths of events, including support for high concurrency, low overhead, and a simple concurrency model. Moreover, we argue that threads allow a simpler and more natural programming style.\nè¿‡å»çš„ä¸€æ®µæ—¶é—´ï¼ˆè®ºæ–‡å‘è¡¨å‰ï¼‰ï¼Œäººä»¬è®¤ä¸ºEvent-orientedæ˜¯é«˜å¹¶å‘ç¨‹åºä¸­å®ç°é«˜æ€§èƒ½çš„æœ€ä½³æ–¹æ³•ã€‚ ä¸»è¦åŸå› æœ‰ï¼š\nç”±äºåä½œå¤šä»»åŠ¡å¤„ç†ï¼ŒåŒæ­¥çš„æˆæœ¬å¾ˆä½; ç®¡ç†çŠ¶æ€çš„å¼€é”€æ›´ä½(æ²¡æœ‰æ ˆ); åŸºäºåº”ç”¨çº§çš„ä¿¡æ¯ï¼Œæ›´å¥½çš„è°ƒåº¦å’Œå±€éƒ¨æ€§; æ›´çµæ´»çš„æ§åˆ¶æµ(ä¸ä»…ä»…æ˜¯è°ƒç”¨/è¿”å›); ä½†æ˜¯ä½œè€…è®¤ä¸ºï¼š\nçº¿ç¨‹ä¸ºé«˜å¹¶å‘æœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªæ›´è‡ªç„¶çš„æŠ½è±¡; å¯¹ç¼–è¯‘å™¨å’Œçº¿ç¨‹è¿è¡Œæ—¶ç³»ç»Ÿçš„å°æ”¹è¿›å¯ä»¥æ¶ˆé™¤ä½¿ç”¨äº‹ä»¶çš„å†å²åŸå› ; çº¿ç¨‹æ›´æ˜“äºæ¥å—åŸºäºç¼–è¯‘å™¨çš„å¢å¼º; åŸæ–‡ 1 2 3 4 5 6 7 â€¢ Inexpensive synchronization due to cooperative multitasking; â€¢ Lower overhead for managing state (no stacks); â€¢ Better scheduling and locality, based on application-level information; and â€¢ More flexible control flow (not just call/return). We believe that (1) threads provide a more natural abstraction for high-concurrency servers, and that (2) small improvements to compilers and thread runtime systems can eliminate the historical reasons to use events. Additionally, threads are more amenable to compiler-based enhancements; we believe the right paradigm for highly concurrent applications is a thread package with better compiler support. Duality Revisited event handlers monitors events accepted by a handler functions exported by a module SendMessage / AwaitReply procedure call, or fork/join SendReply return from procedure waiting for messages waiting on condition variables First, Lauer and Needham ignore the cooperative scheduling used by events for synchronization. Second, most event systems use shared memory and global data structures, which are described as atypical for Lauer and Needhamâ€™s message- passing systems. â€œProblemsâ€ with Threads "><title>Why events are a bad idea</title><link rel=canonical href=https://MyLoveES.github.io/p/why-events-are-a-bad-idea/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Why events are a bad idea"><meta property='og:description' content="Why Events Are A Bad Idea è®ºç‚¹ï¼šçº¿ç¨‹å¯ä»¥å®ç°äº‹ä»¶çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒ…æ‹¬æ”¯æŒé«˜å¹¶å‘æ€§ã€ä½å¼€é”€å’Œç®€å•çš„å¹¶å‘æ¨¡å‹ã€‚æ­¤å¤–ï¼Œçº¿ç¨‹å…è®¸æ›´ç®€å•å’Œæ›´è‡ªç„¶çš„ç¼–ç¨‹é£æ ¼ã€‚ åŸæ–‡ Specifically, we believe that threads can achieve all of the strengths of events, including support for high concurrency, low overhead, and a simple concurrency model. Moreover, we argue that threads allow a simpler and more natural programming style.\nè¿‡å»çš„ä¸€æ®µæ—¶é—´ï¼ˆè®ºæ–‡å‘è¡¨å‰ï¼‰ï¼Œäººä»¬è®¤ä¸ºEvent-orientedæ˜¯é«˜å¹¶å‘ç¨‹åºä¸­å®ç°é«˜æ€§èƒ½çš„æœ€ä½³æ–¹æ³•ã€‚ ä¸»è¦åŸå› æœ‰ï¼š\nç”±äºåä½œå¤šä»»åŠ¡å¤„ç†ï¼ŒåŒæ­¥çš„æˆæœ¬å¾ˆä½; ç®¡ç†çŠ¶æ€çš„å¼€é”€æ›´ä½(æ²¡æœ‰æ ˆ); åŸºäºåº”ç”¨çº§çš„ä¿¡æ¯ï¼Œæ›´å¥½çš„è°ƒåº¦å’Œå±€éƒ¨æ€§; æ›´çµæ´»çš„æ§åˆ¶æµ(ä¸ä»…ä»…æ˜¯è°ƒç”¨/è¿”å›); ä½†æ˜¯ä½œè€…è®¤ä¸ºï¼š\nçº¿ç¨‹ä¸ºé«˜å¹¶å‘æœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªæ›´è‡ªç„¶çš„æŠ½è±¡; å¯¹ç¼–è¯‘å™¨å’Œçº¿ç¨‹è¿è¡Œæ—¶ç³»ç»Ÿçš„å°æ”¹è¿›å¯ä»¥æ¶ˆé™¤ä½¿ç”¨äº‹ä»¶çš„å†å²åŸå› ; çº¿ç¨‹æ›´æ˜“äºæ¥å—åŸºäºç¼–è¯‘å™¨çš„å¢å¼º; åŸæ–‡ 1 2 3 4 5 6 7 â€¢ Inexpensive synchronization due to cooperative multitasking; â€¢ Lower overhead for managing state (no stacks); â€¢ Better scheduling and locality, based on application-level information; and â€¢ More flexible control flow (not just call/return). We believe that (1) threads provide a more natural abstraction for high-concurrency servers, and that (2) small improvements to compilers and thread runtime systems can eliminate the historical reasons to use events. Additionally, threads are more amenable to compiler-based enhancements; we believe the right paradigm for highly concurrent applications is a thread package with better compiler support. Duality Revisited event handlers monitors events accepted by a handler functions exported by a module SendMessage / AwaitReply procedure call, or fork/join SendReply return from procedure waiting for messages waiting on condition variables First, Lauer and Needham ignore the cooperative scheduling used by events for synchronization. Second, most event systems use shared memory and global data structures, which are described as atypical for Lauer and Needhamâ€™s message- passing systems. â€œProblemsâ€ with Threads "><meta property='og:url' content='https://MyLoveES.github.io/p/why-events-are-a-bad-idea/'><meta property='og:site_name' content='Kunkka'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='æ¶æ„'><meta property='article:tag' content='äº‹ä»¶é©±åŠ¨'><meta property='article:tag' content='ç†è®º'><meta property='article:published_time' content='2022-03-23T18:00:00+00:00'><meta property='article:modified_time' content='2022-03-23T18:00:00+00:00'><meta name=twitter:title content="Why events are a bad idea"><meta name=twitter:description content="Why Events Are A Bad Idea è®ºç‚¹ï¼šçº¿ç¨‹å¯ä»¥å®ç°äº‹ä»¶çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒ…æ‹¬æ”¯æŒé«˜å¹¶å‘æ€§ã€ä½å¼€é”€å’Œç®€å•çš„å¹¶å‘æ¨¡å‹ã€‚æ­¤å¤–ï¼Œçº¿ç¨‹å…è®¸æ›´ç®€å•å’Œæ›´è‡ªç„¶çš„ç¼–ç¨‹é£æ ¼ã€‚ åŸæ–‡ Specifically, we believe that threads can achieve all of the strengths of events, including support for high concurrency, low overhead, and a simple concurrency model. Moreover, we argue that threads allow a simpler and more natural programming style.\nè¿‡å»çš„ä¸€æ®µæ—¶é—´ï¼ˆè®ºæ–‡å‘è¡¨å‰ï¼‰ï¼Œäººä»¬è®¤ä¸ºEvent-orientedæ˜¯é«˜å¹¶å‘ç¨‹åºä¸­å®ç°é«˜æ€§èƒ½çš„æœ€ä½³æ–¹æ³•ã€‚ ä¸»è¦åŸå› æœ‰ï¼š\nç”±äºåä½œå¤šä»»åŠ¡å¤„ç†ï¼ŒåŒæ­¥çš„æˆæœ¬å¾ˆä½; ç®¡ç†çŠ¶æ€çš„å¼€é”€æ›´ä½(æ²¡æœ‰æ ˆ); åŸºäºåº”ç”¨çº§çš„ä¿¡æ¯ï¼Œæ›´å¥½çš„è°ƒåº¦å’Œå±€éƒ¨æ€§; æ›´çµæ´»çš„æ§åˆ¶æµ(ä¸ä»…ä»…æ˜¯è°ƒç”¨/è¿”å›); ä½†æ˜¯ä½œè€…è®¤ä¸ºï¼š\nçº¿ç¨‹ä¸ºé«˜å¹¶å‘æœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªæ›´è‡ªç„¶çš„æŠ½è±¡; å¯¹ç¼–è¯‘å™¨å’Œçº¿ç¨‹è¿è¡Œæ—¶ç³»ç»Ÿçš„å°æ”¹è¿›å¯ä»¥æ¶ˆé™¤ä½¿ç”¨äº‹ä»¶çš„å†å²åŸå› ; çº¿ç¨‹æ›´æ˜“äºæ¥å—åŸºäºç¼–è¯‘å™¨çš„å¢å¼º; åŸæ–‡ 1 2 3 4 5 6 7 â€¢ Inexpensive synchronization due to cooperative multitasking; â€¢ Lower overhead for managing state (no stacks); â€¢ Better scheduling and locality, based on application-level information; and â€¢ More flexible control flow (not just call/return). We believe that (1) threads provide a more natural abstraction for high-concurrency servers, and that (2) small improvements to compilers and thread runtime systems can eliminate the historical reasons to use events. Additionally, threads are more amenable to compiler-based enhancements; we believe the right paradigm for highly concurrent applications is a thread package with better compiler support. Duality Revisited event handlers monitors events accepted by a handler functions exported by a module SendMessage / AwaitReply procedure call, or fork/join SendReply return from procedure waiting for messages waiting on condition variables First, Lauer and Needham ignore the cooperative scheduling used by events for synchronization. Second, most event systems use shared memory and global data structures, which are described as atypical for Lauer and Needhamâ€™s message- passing systems. â€œProblemsâ€ with Threads "><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_c68a00bbf16dac8.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Kunkka</a></h1><h2 class=site-description>wind rises</h2></div></header><ol class=menu-social><li><a href=https://github.com/MyLoveES target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=/index.xml target=_blank title=RSS rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/all-categories><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/links><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/all-tags><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#duality-revisited>Duality Revisited</a></li><li><a href=#problems-with-threads>â€œProblemsâ€ with Threads</a><ol><li><a href=#performance>Performance</a></li><li><a href=#control-flow>Control flow</a></li><li><a href=#synchronization>Synchronization</a></li><li><a href=#state-management>State Management</a></li><li><a href=#scheduling>Scheduling</a></li><li><a href=#conclusion>Conclusion</a></li></ol></li><li><a href=#the-case-for-threads>The Case for Threads</a><ol><li><a href=#control-flow-1>Control flow</a></li><li><a href=#exception-handling-and-state-lifetime>Exception Handling and State Lifetime</a></li></ol></li><li><a href=#compiler-support-for-threads>Compiler Support for Threads</a><ol><li><a href=#åŠ¨æ€å †æ ˆå¢é•¿>åŠ¨æ€å †æ ˆå¢é•¿</a></li><li><a href=#å®æ—¶çŠ¶æ€ç®¡ç†>å®æ—¶çŠ¶æ€ç®¡ç†</a></li><li><a href=#åŒæ­¥>åŒæ­¥</a></li></ol></li><li><a href=#conclusion-1>Conclusion</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E6%8A%80%E6%9C%AF/>æŠ€æœ¯</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/why-events-are-a-bad-idea/>Why events are a bad idea</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Mar 23, 2022</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>2 minute read</time></div></footer></div></header><section class=article-content><h1 id=why-events-are-a-bad-idea>Why Events Are A Bad Idea</h1><ul><li>è®ºç‚¹ï¼šçº¿ç¨‹å¯ä»¥å®ç°äº‹ä»¶çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒ…æ‹¬æ”¯æŒé«˜å¹¶å‘æ€§ã€ä½å¼€é”€å’Œç®€å•çš„å¹¶å‘æ¨¡å‹ã€‚æ­¤å¤–ï¼Œçº¿ç¨‹å…è®¸æ›´ç®€å•å’Œæ›´è‡ªç„¶çš„ç¼–ç¨‹é£æ ¼ã€‚</li></ul><details><summary>åŸæ–‡</summary><blockquote><p>Specifically, we believe that threads can achieve all of the strengths of events, including support for high concurrency, low overhead, and a simple concurrency model. Moreover, we argue that threads allow a simpler and more natural programming style.</p></blockquote></details><p>è¿‡å»çš„ä¸€æ®µæ—¶é—´ï¼ˆè®ºæ–‡å‘è¡¨å‰ï¼‰ï¼Œäººä»¬è®¤ä¸ºEvent-orientedæ˜¯é«˜å¹¶å‘ç¨‹åºä¸­å®ç°é«˜æ€§èƒ½çš„æœ€ä½³æ–¹æ³•ã€‚
ä¸»è¦åŸå› æœ‰ï¼š</p><ol><li>ç”±äºåä½œå¤šä»»åŠ¡å¤„ç†ï¼ŒåŒæ­¥çš„æˆæœ¬å¾ˆä½;</li><li>ç®¡ç†çŠ¶æ€çš„å¼€é”€æ›´ä½(æ²¡æœ‰æ ˆ);</li><li>åŸºäºåº”ç”¨çº§çš„ä¿¡æ¯ï¼Œæ›´å¥½çš„è°ƒåº¦å’Œå±€éƒ¨æ€§;</li><li>æ›´çµæ´»çš„æ§åˆ¶æµ(ä¸ä»…ä»…æ˜¯è°ƒç”¨/è¿”å›);</li></ol><p>ä½†æ˜¯ä½œè€…è®¤ä¸ºï¼š</p><ol><li>çº¿ç¨‹ä¸ºé«˜å¹¶å‘æœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªæ›´è‡ªç„¶çš„æŠ½è±¡;</li><li>å¯¹ç¼–è¯‘å™¨å’Œçº¿ç¨‹è¿è¡Œæ—¶ç³»ç»Ÿçš„å°æ”¹è¿›å¯ä»¥æ¶ˆé™¤ä½¿ç”¨äº‹ä»¶çš„å†å²åŸå› ;</li><li><strong>çº¿ç¨‹æ›´æ˜“äºæ¥å—åŸºäºç¼–è¯‘å™¨çš„å¢å¼º;</strong></li></ol><details><summary>åŸæ–‡</summary><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>â€¢</span><span class=w> </span><span class=nx>Inexpensive</span><span class=w> </span><span class=nx>synchronization</span><span class=w> </span><span class=nx>due</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>cooperative</span><span class=w> </span><span class=nx>multitasking</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>â€¢</span><span class=w> </span><span class=nx>Lower</span><span class=w> </span><span class=nx>overhead</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=nx>managing</span><span class=w> </span><span class=nf>state</span><span class=w> </span><span class=p>(</span><span class=nx>no</span><span class=w> </span><span class=nx>stacks</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>â€¢</span><span class=w> </span><span class=nx>Better</span><span class=w> </span><span class=nx>scheduling</span><span class=w> </span><span class=nx>and</span><span class=w> </span><span class=nx>locality</span><span class=p>,</span><span class=w> </span><span class=nx>based</span><span class=w> </span><span class=nx>on</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nx>application</span><span class=o>-</span><span class=nx>level</span><span class=w> </span><span class=nx>information</span><span class=p>;</span><span class=w> </span><span class=nx>and</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>â€¢</span><span class=w> </span><span class=nx>More</span><span class=w> </span><span class=nx>flexible</span><span class=w> </span><span class=nx>control</span><span class=w> </span><span class=nf>flow</span><span class=w> </span><span class=p>(</span><span class=nx>not</span><span class=w> </span><span class=nx>just</span><span class=w> </span><span class=nx>call</span><span class=o>/</span><span class=k>return</span><span class=p>).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nx>We</span><span class=w> </span><span class=nx>believe</span><span class=w> </span><span class=nf>that</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=nx>threads</span><span class=w> </span><span class=nx>provide</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=nx>more</span><span class=w> </span><span class=nx>natural</span><span class=w> </span><span class=nx>abstraction</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=nx>high</span><span class=o>-</span><span class=nx>concurrency</span><span class=w> </span><span class=nx>servers</span><span class=p>,</span><span class=w> </span><span class=nx>and</span><span class=w> </span><span class=nf>that</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=nx>small</span><span class=w> </span><span class=nx>improvements</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>compilers</span><span class=w> </span><span class=nx>and</span><span class=w> </span><span class=nx>thread</span><span class=w> </span><span class=nx>runtime</span><span class=w> </span><span class=nx>systems</span><span class=w> </span><span class=nx>can</span><span class=w> </span><span class=nx>eliminate</span><span class=w> </span><span class=nx>the</span><span class=w> </span><span class=nx>historical</span><span class=w> </span><span class=nx>reasons</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>use</span><span class=w> </span><span class=nx>events</span><span class=p>.</span><span class=w> </span><span class=nx>Additionally</span><span class=p>,</span><span class=w> </span><span class=nx>threads</span><span class=w> </span><span class=nx>are</span><span class=w> </span><span class=nx>more</span><span class=w> </span><span class=nx>amenable</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>compiler</span><span class=o>-</span><span class=nx>based</span><span class=w> </span><span class=nx>enhancements</span><span class=p>;</span><span class=w> </span><span class=nx>we</span><span class=w> </span><span class=nx>believe</span><span class=w> </span><span class=nx>the</span><span class=w> </span><span class=nx>right</span><span class=w> </span><span class=nx>paradigm</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=nx>highly</span><span class=w> </span><span class=nx>concurrent</span><span class=w> </span><span class=nx>applications</span><span class=w> </span><span class=nx>is</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=nx>thread</span><span class=w> </span><span class=kn>package</span><span class=w> </span><span class=nx>with</span><span class=w> </span><span class=nx>better</span><span class=w> </span><span class=nx>compiler</span><span class=w> </span><span class=nx>support</span><span class=p>.</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></details><h2 id=duality-revisited>Duality Revisited</h2><div class=table-wrapper><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>event handlers</td><td>monitors</td></tr><tr><td>events accepted by a handler</td><td>functions exported by a module</td></tr><tr><td>SendMessage / AwaitReply</td><td>procedure call, or fork/join</td></tr><tr><td>SendReply</td><td>return from procedure</td></tr><tr><td>waiting for messages</td><td>waiting on condition variables</td></tr></tbody></table></div><ul><li>First, Lauer and Needham ignore the cooperative scheduling used by events for synchronization.</li><li>Second, most event systems use shared memory and global data structures, which are described as atypical for Lauer and Needhamâ€™s message- passing systems.</li></ul><h2 id=problems-with-threads>â€œProblemsâ€ with Threads</h2><p><img src=/ConcurrentTasks.png loading=lazy></p><h3 id=performance>Performance</h3><blockquote><p>Criticism: è®¸å¤šå°è¯•ä½¿ç”¨çº¿ç¨‹å®ç°çš„é«˜å¹¶å‘æ¨¡å‹å¹¶ä¸æ˜¯å¾ˆæ£’<br>å¼€é”€çš„ä¸»è¦æ¥æºæ˜¯ï¼Œå­˜åœ¨å’Œçº¿ç¨‹æ•°ç›¸å…³çš„O(n)çš„æ“ä½œçš„å­˜åœ¨ï¼›å¹¶ä¸”ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤§ï¼ˆç”±äºéœ€è¦ä¿å­˜å¯„å­˜å™¨å’Œå…¶ä»–çŠ¶æ€ï¼Œä»¥åŠkernel crossingsï¼‰ã€‚ä½†è¿™äº›æ˜¯çº¿ç¨‹å·¥å…·åŒ…å®ç°çš„é—®é¢˜ï¼Œè€Œéçº¿ç¨‹è‡ªèº«çš„é—®é¢˜ã€‚ // TODO: ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¹¶ä¸”ä¸ºä»€ä¹ˆå¼€é”€å¤§</p></blockquote><h3 id=control-flow>Control flow</h3><blockquote><p>Criticism: çº¿ç¨‹æ˜¯æœ‰é™åˆ¶æ€§çš„æ§åˆ¶æµã€‚å®ƒé¼“åŠ±ç¨‹åºå‘˜å¯¹æ§åˆ¶æµè¿›è¡Œè¿‡äºçº¿æ€§çš„æ€è€ƒï¼Œå¯èƒ½ä¼šæ’é™¤ä½¿ç”¨æ›´æœ‰æ•ˆçš„æ§åˆ¶æµæ¨¡å¼ã€‚<br>å¤æ‚çš„æ§åˆ¶æµæ¨¡å¼åœ¨å®è·µä¸­æ˜¯å¾ˆå°‘è§çš„ï¼Œå¹¶ä¸”åœ¨ä¸åŒç±»å‹çš„ç³»ç»Ÿä¸­éƒ½éœ€è¦å¾—åˆ°å¤„ç†ã€‚</p></blockquote><h3 id=synchronization>Synchronization</h3><blockquote><p>Criticism: çº¿ç¨‹åŒæ­¥æœºåˆ¶å¾ˆé‡ // TODO: ä»€ä¹ˆæ˜¯çº¿ç¨‹åŒæ­¥ï¼Ÿæˆ‘çš„ç†è§£åº”è¯¥æ˜¯è¯´ï¼ŒåŠ é”ä¿è¯åŒæ­¥<br>äº‹ä»¶ç³»ç»Ÿè®¤ä¸ºåˆä½œå¤šä»»åŠ¡æ¨¡å¼"å…è´¹"åœ°ä¸ºå®ƒä»¬æä¾›äº†åŒæ­¥æœºåˆ¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿæ— éœ€å¤„ç†äº’æ–¥ã€ç­‰å¾…é˜Ÿåˆ—ç­‰ç­‰ã€‚ä½†æ˜¯ä»…ä»…æ˜¯åœ¨å•å¤„ç†å™¨ä¸Šå®ç°ï¼Œè€Œç°åœ¨å¤§å¤šæ˜¯å¤šå¤„ç†å™¨ã€‚</p></blockquote><h3 id=state-management>State Management</h3><blockquote><p>Criticism: çº¿ç¨‹å †æ ˆä¸æ˜¯ç®¡ç†å®æ—¶çŠ¶æ€çš„ä¸€ç§æœ‰æ•ˆæ–¹å¼ã€‚çº¿ç¨‹ç³»ç»Ÿé€šå¸¸é¢ä¸´ç€å †æ ˆæº¢å‡ºçš„é£é™©å’Œåœ¨å¤§å †æ ˆä¸Šæµªè´¹è™šæ‹Ÿåœ°å€ç©ºé—´ä¹‹é—´çš„æƒè¡¡<br>ä½œè€…æ‰‹åŠ¨è§£å†³</p></blockquote><h3 id=scheduling>Scheduling</h3><blockquote><p>Criticism: çº¿ç¨‹æä¾›çš„è™šæ‹Ÿå¤„ç†å™¨æ¨¡å‹ä½¿è¿è¡Œæ—¶ç³»ç»Ÿè¿‡äºæ³›åŒ–ï¼Œä½¿å…¶æ— æ³•åšå‡ºæœ€ä½³è°ƒåº¦å†³ç­– // TODO: å•¥æ„æ€ï¼Ÿ<br>äº‹ä»¶ç³»ç»Ÿèƒ½å¤Ÿåœ¨åº”ç”¨å±‚é¢ä¸Šè°ƒåº¦äº‹ä»¶çš„äº¤ä»˜ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥æ‰§è¡Œæœ€çŸ­çš„å‰©ä½™å®Œæˆæ—¶é—´è°ƒåº¦ï¼Œæœ‰åˆ©äºæŸäº›è¯·æ±‚æµï¼Œæˆ–æ‰§è¡Œå…¶ä»–ä¼˜åŒ–ã€‚ä¹Ÿæœ‰ä¸€äº›è¯æ®è¡¨æ˜ï¼Œé€šè¿‡è¿ç»­è¿è¡Œå‡ ä¸ªç›¸åŒç±»å‹çš„äº‹ä»¶ï¼Œäº‹ä»¶å…è®¸æ›´å¥½çš„ä»£ç å®šä½[9]ã€‚ç„¶è€Œï¼ŒLauer-NeedhamäºŒå…ƒæ€§è¡¨æ˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŒæ ·çš„è°ƒåº¦æŠ€å·§åº”ç”¨äºåˆä½œè°ƒåº¦çš„çº¿ç¨‹ã€‚</p></blockquote><h3 id=conclusion>Conclusion</h3><p>ä¸Šè¿°è®ºç‚¹è¡¨æ˜ï¼Œåœ¨é«˜å¹¶å‘æ€§æ–¹é¢ï¼Œçº¿ç¨‹çš„æ€§èƒ½è‡³å°‘ä¸äº‹ä»¶ä¸€æ ·å¥½ï¼Œè€Œä¸”äº‹ä»¶åœ¨è´¨é‡ä¸Šæ²¡æœ‰å®è´¨æ€§çš„ä¼˜åŠ¿ã€‚<br>å¯æ‰©å±•çš„ç”¨æˆ·çº§çº¿ç¨‹çš„ç¼ºå¤±ä¸ºäº‹ä»¶é£æ ¼æä¾›äº†æœ€å¤§çš„æ¨åŠ¨åŠ›ï¼Œä½†æˆ‘ä»¬å·²ç»è¡¨æ˜ï¼Œè¿™ä¸€ç¼ºé™·æ˜¯ç°æœ‰å®ç°çš„ä¸€ä¸ªä¼ªå‘½é¢˜ï¼Œè€Œä¸æ˜¯çº¿ç¨‹æŠ½è±¡çš„ä¸€ä¸ªåŸºæœ¬å±æ€§ã€‚<br>ï¼ˆä½œè€…è®¤ä¸ºï¼Œä¸Šé¢åˆ—ä¸¾çš„é—®é¢˜éƒ½ä¸æ˜¯çº¿ç¨‹æœ¬èº«çš„é”…ï¼éƒ½æ˜¯å®ç°æ–¹å¼é€ æˆçš„ï¼EventDrivenå’ŒThreadsèƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼ï¼‰</p><h2 id=the-case-for-threads>The Case for Threads</h2><p>å¯¹äºé«˜å¹¶å‘æœåŠ¡å™¨ï¼Œçº¿ç¨‹æ˜¯æ›´åˆç†çš„æŠ½è±¡ã€‚åŸå› æœ‰äºŒï¼š</p><ol><li>å¹¶å‘è¯·æ±‚ä¹‹é—´ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å½¼æ­¤ç‹¬ç«‹çš„ã€‚</li><li>å¤„ç†è¯·æ±‚çš„ä»£ç æ˜¯é¡ºåºçš„ã€‚</li></ol><h3 id=control-flow-1>Control flow</h3><p>åŸºäºäº‹ä»¶çš„ç³»ç»Ÿï¼Œå¾€å¾€ä¼šæ··æ·†åº”ç”¨ç¨‹åºçš„äº‹ä»¶æµï¼Œå› ä¸ºä¸åŒç¯èŠ‚ä¹‹é—´å®é™…æ˜¯é€šè¿‡â€œäº‹ä»¶â€è¿æ¥çš„ã€‚Coderéœ€è¦è®°ä½å¹¶ä¸”åŒ¹é…eventå’Œç¯èŠ‚ï¼Œå¹¶ä¸”ä¸ä¾¿äºè°ƒè¯•ã€‚<br>è€Œçº¿ç¨‹æ¨¡å‹è¡¨è¾¾æ§åˆ¶æµçš„æ–¹å¼æ›´è‡ªç„¶ï¼ˆçº¿æ€§å¤„ç†ï¼‰äº†ï¼Œå¹¶ä¸”çº¿ç¨‹å †æ ˆå°è£…äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥è¿›è¡Œè°ƒè¯•ã€‚</p><h3 id=exception-handling-and-state-lifetime>Exception Handling and State Lifetime</h3><p>åœ¨çº¿ç¨‹ç³»ç»Ÿä¸­ï¼Œåœ¨å¼‚å¸¸å’Œæ­£å¸¸ç»ˆæ­¢åæ¸…ç†ä»»åŠ¡çŠ¶æ€æ›´ç®€å•ï¼Œå› ä¸ºçº¿ç¨‹å †æ ˆè‡ªç„¶ä¼šè·Ÿè¸ªè¯¥ä»»åŠ¡çš„æ´»åŠ¨çŠ¶æ€ã€‚<br>åœ¨äº‹ä»¶ç³»ç»Ÿä¸­ï¼Œä»»åŠ¡çŠ¶æ€é€šå¸¸æ˜¯å †åˆ†é…çš„ã€‚åœ¨æ­£ç¡®çš„æ—¶é—´é‡Šæ”¾è¿™ä¸ªçŠ¶æ€æ˜¯éå¸¸å›°éš¾çš„ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºæ§åˆ¶æµä¸­çš„åˆ†æ”¯(ç‰¹åˆ«æ˜¯åœ¨é”™è¯¯æ¡ä»¶ä¸‹)å¯èƒ½ä¼šå¯¼è‡´é”™è¿‡é‡Šæ”¾æ­¥éª¤ã€‚ // ?</p><h2 id=compiler-support-for-threads>Compiler Support for Threads</h2><p>ç¼–è¯‘å™¨å’Œç³»ç»Ÿç´§å¯†ç»“åˆ, å®ç°æ›´å¥½çš„å®‰å…¨æ€§å’Œæ€§èƒ½!</p><h3 id=åŠ¨æ€å †æ ˆå¢é•¿>åŠ¨æ€å †æ ˆå¢é•¿</h3><p>è¿è¡Œæ—¶è°ƒæ•´å †æ ˆå¤§å°ï¼Œé¿å…å›ºå®šå¤§å°å †å¸¦æ¥çš„æº¢å‡ºé£é™©å’Œå†…å­˜æµªè´¹ã€‚é€šè¿‡ç¼–è¯‘å™¨åˆ†ææ¥å¾—åˆ°æ‰€éœ€å †æ ˆç©ºé—´çš„ä¸Šé™åŠå¢é•¿ç‚¹ã€‚</p><h3 id=å®æ—¶çŠ¶æ€ç®¡ç†>å®æ—¶çŠ¶æ€ç®¡ç†</h3><p>æ¸…é™¤ä¸å¿…è¦çš„çŠ¶æ€(state)ï¼Œæ£€æµ‹é˜»å¡è°ƒç”¨ä¸­æŒæœ‰å¤§é‡å®ä¾‹çš„æƒ…å†µç­‰ç­‰ã€‚</p><h3 id=åŒæ­¥>åŒæ­¥</h3><p>ç¼–è¯‘å™¨è­¦å‘Šæ•°æ®ç«äº‰å¤„æ¥å‡å°‘é”™è¯¯çš„å‘ç”Ÿã€‚</p><h2 id=conclusion-1>Conclusion</h2><p>çº¿ç¨‹æ¨¡å‹èƒ½å¤Ÿè¾¾åˆ°å’Œäº‹ä»¶é©±åŠ¨å‡ ä¹ä¸€æ ·çš„æ€§èƒ½æ•ˆæœï¼Œå¹¶ä¸”æ¨¡å‹æ›´ç®€å•ï¼Œæ›´æ˜“äºç¼–è¯‘å™¨åˆ†æï¼Œå› æ­¤ Threads æ˜¯ä¸€ä¸ªæ›´å¥½çš„ç¼–ç¨‹æ¨¡å‹ã€‚</p><h1 id=ref>Ref</h1><blockquote><p>ref: <a class=link href=http://capriccio.cs.berkeley.edu/pubs/threads-hotos-2003.pdf target=_blank rel=noopener>Why events are a bad idea</a></p></blockquote></section><footer class=article-footer><section class=article-tags><a href=/tags/%E6%9E%B6%E6%9E%84/>æ¶æ„</a>
<a href=/tags/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8/>äº‹ä»¶é©±åŠ¨</a>
<a href=/tags/%E7%90%86%E8%AE%BA/>ç†è®º</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8-or-%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B/><div class=article-details><h2 class=article-title>äº‹ä»¶é©±åŠ¨ or é¢å‘è¿‡ç¨‹</h2></div></a></article><article><a href=/p/why-reactor/><div class=article-details><h2 class=article-title>Why Reactor</h2></div></a></article><article><a href=/p/reaching-agreement-in-the-presence-of-faults/><div class=article-details><h2 class=article-title>Reaching agreement in the presence of faults</h2></div></a></article><article><a href=/p/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%B0%86%E5%86%9B-%E5%8C%85%E5%90%AB%E6%81%B6%E6%84%8F%E8%8A%82%E7%82%B9%E7%9A%84%E5%85%B1%E8%AF%86%E9%97%AE%E9%A2%98/><div class=article-details><h2 class=article-title>æ‹œå åº­å°†å†› - åŒ…å«æ¶æ„èŠ‚ç‚¹çš„å…±è¯†é—®é¢˜</h2></div></a></article><article><a href=/p/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%B0%86%E5%86%9B-%E8%AE%BA%E6%96%87%E7%BF%BB%E8%AF%91/><div class=article-details><h2 class=article-title>æ‹œå åº­å°†å†› - è®ºæ–‡ç¿»è¯‘</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//weasley.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Kunkka</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>