<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="\nWhat & Why Single entry point for all clients (面向客户端的单一入口) Common in microservice architectures （微服务需要业务聚合） Client insulation from services （客户端和服务隔离） protocol （协议转换） Security（安全） surgical routing（路由） Load Shedding （负载均衡） Rate Limit（限流） Cache（缓存） Fuse（熔断） Retry（重试） Auth（认证、鉴权） Log（日志收集） Monitor（监控） Tracing Analysis（链路追踪） Aspects to be considered Develepment（Programming Language） Community activity Performance Stability Update SOME GATEWAY(By programming language) Nginx+Lua：Open Resty、Kong、Orange、Abtesting Gateway等； Java：Zuul/Zuul 2、Spring Cloud Gateway、Kaazing KWG、gravitee、Dromara soul等； Go：Janus、fagongzi、Grpc-Gateway； .NET：Ocelot； Node.js：Express Gateway、MicroGateway。 使用范围、成熟度、活跃度等，主流有：Kong、Zuul/Zuul 2、Spring Cloud Gateway、apisix\n"><title>网关选型</title><link rel=canonical href=https://MyLoveES.github.io/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="网关选型"><meta property='og:description' content="\nWhat & Why Single entry point for all clients (面向客户端的单一入口) Common in microservice architectures （微服务需要业务聚合） Client insulation from services （客户端和服务隔离） protocol （协议转换） Security（安全） surgical routing（路由） Load Shedding （负载均衡） Rate Limit（限流） Cache（缓存） Fuse（熔断） Retry（重试） Auth（认证、鉴权） Log（日志收集） Monitor（监控） Tracing Analysis（链路追踪） Aspects to be considered Develepment（Programming Language） Community activity Performance Stability Update SOME GATEWAY(By programming language) Nginx+Lua：Open Resty、Kong、Orange、Abtesting Gateway等； Java：Zuul/Zuul 2、Spring Cloud Gateway、Kaazing KWG、gravitee、Dromara soul等； Go：Janus、fagongzi、Grpc-Gateway； .NET：Ocelot； Node.js：Express Gateway、MicroGateway。 使用范围、成熟度、活跃度等，主流有：Kong、Zuul/Zuul 2、Spring Cloud Gateway、apisix\n"><meta property='og:url' content='https://MyLoveES.github.io/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/'><meta property='og:site_name' content='Kunkka'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='架构'><meta property='article:tag' content='网关'><meta property='article:published_time' content='2022-03-10T00:00:00+00:00'><meta property='article:modified_time' content='2022-03-10T00:00:00+00:00'><meta name=twitter:title content="网关选型"><meta name=twitter:description content="\nWhat & Why Single entry point for all clients (面向客户端的单一入口) Common in microservice architectures （微服务需要业务聚合） Client insulation from services （客户端和服务隔离） protocol （协议转换） Security（安全） surgical routing（路由） Load Shedding （负载均衡） Rate Limit（限流） Cache（缓存） Fuse（熔断） Retry（重试） Auth（认证、鉴权） Log（日志收集） Monitor（监控） Tracing Analysis（链路追踪） Aspects to be considered Develepment（Programming Language） Community activity Performance Stability Update SOME GATEWAY(By programming language) Nginx+Lua：Open Resty、Kong、Orange、Abtesting Gateway等； Java：Zuul/Zuul 2、Spring Cloud Gateway、Kaazing KWG、gravitee、Dromara soul等； Go：Janus、fagongzi、Grpc-Gateway； .NET：Ocelot； Node.js：Express Gateway、MicroGateway。 使用范围、成熟度、活跃度等，主流有：Kong、Zuul/Zuul 2、Spring Cloud Gateway、apisix\n"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_c68a00bbf16dac8.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Kunkka</a></h1><h2 class=site-description>wind rises</h2></div></header><ol class=menu-social><li><a href=https://github.com/MyLoveES target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=/index.xml target=_blank title=RSS rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/all-categories><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/links><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/all-tags><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#what--why>What & Why</a></li><li><a href=#aspects-to-be-considered>Aspects to be considered</a></li><li><a href=#some-gatewayby-programming-language>SOME GATEWAY(By programming language)</a><ol><li><a href=#nginx>Nginx</a></li><li><a href=#openrestynginx--lua>OpenResty（Nginx + Lua）</a></li><li><a href=#apisixnginx--etcd>APISIX（Nginx + etcd）</a></li><li><a href=#kongnginx--postgres>Kong（Nginx + postgres）</a></li><li><a href=#zuul-java>Zuul (Java)</a><ol><li><a href=#problems>PROBLEMS?</a></li></ol></li><li><a href=#zuul2-java>Zuul2 (Java)</a></li><li><a href=#spring-cloud-gateway-java>Spring Cloud Gateway (Java)</a><ol><li><a href=#spring-cloud紧密配合>Spring Cloud紧密配合</a></li></ol></li></ol></li><li><a href=#compare>Compare</a><ol><li><a href=#zuul-vs-zuul2-difference-between-sync-and-async-zuul2-win><strong>Zuul vs Zuul2 (Difference between sync and async): Zuul2 Win!</strong></a></li><li><a href=#kong-vs-apisix><strong>Kong vs APISIX</strong></a></li><li><a href=#spring-cloud-gateway-vs-zuul2-vs-openresty-vs-kong><strong>Spring Cloud Gateway vs Zuul2 vs OpenResty vs Kong</strong></a></li></ol></li><li><a href=#finally>Finally</a><ol><li><a href=#kong>Kong</a></li><li><a href=#apisix>Apisix</a></li><li><a href=#zuul>Zuul</a></li><li><a href=#zuul2>Zuul2</a></li><li><a href=#spring-cloud-gateway>Spring Cloud Gateway</a></li></ol></li><li><a href=#结论>结论</a></li><li><a href=#ref>Ref</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E6%8A%80%E6%9C%AF/>技术</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/>网关选型</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Mar 10, 2022</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/gateway.png width=811 height=445 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/gateway_hu_474b40f71541ad21.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/gateway_hu_734a63bf04d57ab2.png 1024w" loading=lazy class=gallery-image data-flex-grow=182 data-flex-basis=437px></p><h2 id=what--why>What & Why</h2><ul><li>Single entry point for all clients (面向客户端的单一入口)</li><li>Common in microservice architectures （微服务需要业务聚合）</li><li>Client insulation from services （客户端和服务隔离）</li><li>protocol （协议转换）</li><li>Security（安全）</li><li>surgical routing（路由）</li><li>Load Shedding （负载均衡）</li><li>Rate Limit（限流）</li><li>Cache（缓存）</li><li>Fuse（熔断）</li><li>Retry（重试）</li><li>Auth（认证、鉴权）</li><li>Log（日志收集）</li><li>Monitor（监控）</li><li>Tracing Analysis（链路追踪）</li></ul><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/apigateway.jpeg width=570 height=420 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/apigateway_hu_93a6d3dcc6e22fe2.jpeg 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/apigateway_hu_e66f4eba1fab897d.jpeg 1024w" loading=lazy class=gallery-image data-flex-grow=135 data-flex-basis=325px></p><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/backendforfrontend.png width=1024 height=768 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/backendforfrontend_hu_86362f78dcc77950.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/backendforfrontend_hu_6e347c66b33e1c0e.png 1024w" loading=lazy class=gallery-image data-flex-grow=133 data-flex-basis=320px></p><h2 id=aspects-to-be-considered>Aspects to be considered</h2><ul><li>Develepment（Programming Language）</li><li>Community activity</li><li>Performance</li><li>Stability</li><li>Update</li></ul><h2 id=some-gatewayby-programming-language>SOME GATEWAY(By programming language)</h2><ul><li>Nginx+Lua：Open Resty、Kong、Orange、Abtesting Gateway等；</li><li>Java：Zuul/Zuul 2、Spring Cloud Gateway、Kaazing KWG、gravitee、Dromara soul等；</li><li>Go：Janus、fagongzi、Grpc-Gateway；</li><li>.NET：Ocelot；</li><li>Node.js：Express Gateway、MicroGateway。</li></ul><p>使用范围、成熟度、活跃度等，主流有：Kong、Zuul/Zuul 2、Spring Cloud Gateway、apisix</p><h3 id=nginx>Nginx</h3><p>Nginx 更偏向于作为流量网关。成熟，性能好，稳定。
但致命弱点是，不便于自定义开发（有一部分是开发语言的原因），需要 +Lua (例如下面的 OpenResty / Kong / Apisix)。</p><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/nginx.png width=518 height=341 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/nginx_hu_6bfe384206284b58.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/nginx_hu_79b53cadc4c3d597.png 1024w" loading=lazy class=gallery-image data-flex-grow=151 data-flex-basis=364px></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Nginx 在启动后，会有一个 Master 进程和多个 Worker 进程，Master 进程和 Worker 进程之间是通过进程间通信进行交互的，如图所示。Worker 工作进程的阻塞点是在像 select()、epoll_wait() 等这样的 I/O 多路复用函数调用处，以等待发生数据可读 / 写事件。Nginx 采用了异步非阻塞的方式来处理请求，也就是说，Nginx 是可以同时处理成千上万个请求的。
</span></span></code></pre></td></tr></table></div></div><h3 id=openrestynginx--lua>OpenResty（Nginx + Lua）</h3><p>OpenResty nginx + Lua动态扩展。目前已经有基于Open Resty产生的gateway，例如 Kong，APISIX等。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>还可以将 Lua 嵌入到 Nginx 中，从而可以使用 Lua 来编写脚本，这样就可以使用 Lua 编写应用脚本，部署到 Nginx 中运行，即 Nginx 变成了一个 Web 容器；这样开发人员就可以使用 Lua 语言开发高性能Web应用了。在开发的时候使用 OpenResty 来搭建开发环境，OpenResty 将 Nginx 核心、LuaJIT、许多有用的 Lua 库和 Nginx 第三方模块打包在一起；这样只需要安装 OpenResty，不需要了解 Nginx 核心和写复杂的 C/C++ 模块就可以，只需要使用 Lua 语言进行 Web 应用开发了。
</span></span></code></pre></td></tr></table></div></div><h3 id=apisixnginx--etcd>APISIX（Nginx + etcd）</h3><ul><li>Develepment（Programming Language）: N</li><li>Community activity: Y</li><li>Performance: Y</li><li>Stability: ？</li><li>Update: Y</li></ul><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/apisix.webp width=1280 height=625 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/apisix_hu_a45f8406feeca355.webp 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/apisix_hu_af6578e16e291a5e.webp 1024w" loading=lazy class=gallery-image data-flex-grow=204 data-flex-basis=491px></p><p>APISIX的性能更好，功能也更加丰富。
但APISIX很年轻，或许需要更多的“检验”，开发语言的差别也会增加问题排查、处理的代价。<br>(可以尝试)</p><h3 id=kongnginx--postgres>Kong（Nginx + postgres）</h3><ul><li>Develepment（Programming Language）: Y</li><li>Community activity: Y</li><li>Performance: N (compared with apisix)</li><li>Stability: Y</li><li>Update: Y</li></ul><p>Kong和APISIX相比较而言，从性能、功能丰富度方面 都处于下风（毕竟APISIX更新）。而且开发语言的劣势同样具有。</p><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong.png width=1466 height=1372 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong_hu_3b513c167937bb43.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong_hu_a0ecef3e2c7f7914.png 1024w" loading=lazy class=gallery-image data-flex-grow=106 data-flex-basis=256px></p><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong2.png width=879 height=369 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong2_hu_b230d23971cb240b.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong2_hu_813c611b12eab014.png 1024w" loading=lazy class=gallery-image data-flex-grow=238 data-flex-basis=571px></p><h3 id=zuul-java>Zuul (Java)</h3><p>Zuul-动态路由、监控、弹性和安全。基于Servlet，属于上一代产品，同步I/O、多线程。性能不好，针对于Zuul的替代方案已经有 Zuul2 以及 Spring Gateway 两类。因此Zuul不予考虑。</p><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/zuul-lifecycle.png width=960 height=720 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/zuul-lifecycle_hu_4e1bfcf0bb00de2a.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/zuul-lifecycle_hu_23c5a5ad429bc0c4.png 1024w" loading=lazy class=gallery-image data-flex-grow=133 data-flex-basis=320px></p><blockquote><p>PreDecorationFilter<br>SendForwardFilter<br>RibbonRoutingFilter<br>SimpleHostRoutingFilter<br>SendResponseFilter<br>SendErrorFilter</p></blockquote><h4 id=problems>PROBLEMS?</h4><blockquote><p>Large coupled filters
Filter model/API is clunky</p></blockquote><h3 id=zuul2-java>Zuul2 (Java)</h3><ul><li>Develepment（Programming Language）: N</li><li>Community activity: Y</li><li>Performance: Y</li><li>Stability: ？</li><li>Update: Y</li></ul><p>服务发现、负载均衡、连接池、状态分类、重试、请求凭证、HTTP/2、TLS、代理协议、GZip、WebSocket<br>基于 Netty，Zuul 2.x最大的改进就是基于Netty Server实现了异步I/O来接入请求，同时基于Netty Client实现了到后端业务服务API的请求。这样就可以实现更高的性能、更低的延迟。此外也调整了Filter类型，将原来的三个核心Filter显式命名为Inbound Filter、Endpoint Filter和Outbound Filter，如图7-8所示。</p><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Zuul2.png width=872 height=721 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Zuul2_hu_dc9b3033cce22d5.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Zuul2_hu_2fb45e3040d5e8f1.png 1024w" loading=lazy class=gallery-image data-flex-grow=120 data-flex-basis=290px></p><blockquote><p>Major rewrite<br>Not backwards compatible with Zuul 1<br>Non-blocking/Netty<br>Not released yet<br>HTTP/2 and Websockets in the future<br>Reinvents many things from Spring</p></blockquote><h3 id=spring-cloud-gateway-java>Spring Cloud Gateway (Java)</h3><ul><li>Develepment（Programming Language）: Y</li><li>Community activity: Y</li><li>Performance: Y</li><li>Stability: Y</li><li>Update: Y</li></ul><p>Java 8、Spring 5.0、Spring Boot 2.0、Reactor -> Spring family</p><h4 id=spring-cloud紧密配合>Spring Cloud紧密配合</h4><p>目前使用了nacos作为配置中心，可以和 gateway 搭配。</p><blockquote><p>Java 8/Spring 5/Boot 2
WebFlux/Reactor
HTTP/2 and Websockets
Finchley Release Train</p></blockquote><p>Spring Cloud Gateway里明确地区分了Router和Filter，内置了非常多的开箱即用功能，并且都可以通过Spring Boot配置或手工编码链式调用来使用。<br>内置了10种Router，直接配置就可以随心所欲地根据Header、Path、Host或Query来做路由。</p><h5 id=核心特性>核心特性：</h5><ul><li>通过请求参数匹配路由；</li><li>通过断言和过滤器实现路由；</li><li>与Hystrix熔断集成；</li><li>与Spring Cloud DiscoveryClient集成；</li><li>非常方便地实现断言和过滤器；</li><li>请求限流；</li><li>路径重写。</li></ul><h2 id=compare>Compare</h2><h3 id=zuul-vs-zuul2-difference-between-sync-and-async-zuul2-win><strong>Zuul vs Zuul2 (Difference between sync and async): Zuul2 Win!</strong></h3><ul><li><strong>Zuul(block) disadvantages</strong></li><li><em>Zuul 1</em> was built on the Servlet framework</li><li>Blocking and mltithreaded, means they process requests by using one thread per connection.</li><li>I/O oprations are done by choosing a worker threade from athread pool to execute the I/O, and the request thread is blocked until the worker thread completes, and the worker thread notifies the request thread when its work is complete.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>This</span> <span class=n>works</span> <span class=n>well</span> <span class=n>with</span> <span class=n>modern</span> <span class=n>multi</span><span class=o>-</span><span class=n>core</span> <span class=n>AWS</span> <span class=n>instances</span> <span class=n>handling</span> <span class=mi>100</span><span class=err>’</span><span class=n>s</span> <span class=n>of</span> <span class=n>concurrent</span> <span class=n>connections</span> <span class=n>each</span><span class=o>.</span> <span class=n>But</span> <span class=n>when</span> <span class=n>things</span> <span class=n>go</span> <span class=n>wrong</span><span class=p>,</span> <span class=n>like</span> <span class=n>backend</span> <span class=n>latency</span> <span class=n>increases</span> <span class=ow>or</span> <span class=n>device</span> <span class=n>retries</span> <span class=n>due</span> <span class=n>to</span> <span class=n>errors</span><span class=p>,</span> <span class=n>the</span> <span class=n>count</span> <span class=n>of</span> <span class=n>active</span> <span class=n>connections</span> <span class=ow>and</span> <span class=n>threads</span> <span class=n>increases</span><span class=o>.</span> <span class=n>When</span> <span class=n>this</span> <span class=n>happens</span><span class=p>,</span> <span class=n>nodes</span> <span class=n>get</span> <span class=n>into</span> <span class=n>trouble</span> <span class=ow>and</span> <span class=n>can</span> <span class=n>go</span> <span class=n>into</span> <span class=n>a</span> <span class=n>death</span> <span class=n>spiral</span> <span class=n>where</span> <span class=n>backed</span> <span class=n>up</span> <span class=n>threads</span> <span class=n>spike</span> <span class=n>server</span> <span class=n>loads</span> <span class=ow>and</span> <span class=n>overwhelm</span> <span class=n>the</span> <span class=n>cluster</span><span class=o>.</span> <span class=n>To</span> <span class=n>offset</span> <span class=n>these</span> <span class=n>risks</span><span class=p>,</span> <span class=n>we</span> <span class=n>built</span> <span class=ow>in</span> <span class=n>throttling</span> <span class=n>mechanisms</span> <span class=ow>and</span> <span class=n>libraries</span> <span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>g</span><span class=o>.</span><span class=p>,</span> <span class=n>Hystrix</span><span class=p>)</span> <span class=n>to</span> <span class=n>help</span> <span class=n>keep</span> <span class=n>our</span> <span class=n>blocking</span> <span class=n>systems</span> <span class=n>stable</span> <span class=n>during</span> <span class=n>these</span> <span class=n>events</span><span class=o>.</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Multithreaded_System_Architecture.png width=572 height=344 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Multithreaded_System_Architecture_hu_d87eeb4c381c80df.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Multithreaded_System_Architecture_hu_4573d414f79beea9.png 1024w" loading=lazy class=gallery-image data-flex-grow=166 data-flex-basis=399px></p><ul><li><strong>Zuul2(async) advantages</strong></li><li><em>Zuul2</em> async.</li><li>One thread per CPU core handling all requests and responses. The lifecycle of the request and response is handled through events and callbacks.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Because there is not a thread for each request, the cost of connections is cheap. This is the cost of a file descriptor, and the addition of a listener. Whereas the cost of a connection in the blocking model is a thread and with heavy memory and system overhead. There are some efficiency gains because data stays on the same CPU, making better use of CPU level caches and requiring fewer context switches. The fallout of backend latency and “retry storms” (customers and devices retrying requests when problems occur) is also less stressful on the system because connections and increased events in the queue are far less expensive than piling up threads.
</span></span></code></pre></td></tr></table></div></div><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Asynchronous_and_Non-blocking_System_Architecture.png width=552 height=434 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Asynchronous_and_Non-blocking_System_Architecture_hu_af69c71f234b2f1d.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Asynchronous_and_Non-blocking_System_Architecture_hu_ec4949e740125ac4.png 1024w" loading=lazy class=gallery-image data-flex-grow=127 data-flex-basis=305px></p><ul><li><strong>Zuul2(async) disadvantages & Zuul(block) advantages</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>The</span> <span class=n>advantages</span> <span class=n>of</span> <span class=n>async</span> <span class=n>systems</span> <span class=n>sound</span> <span class=n>glorious</span><span class=p>,</span> <span class=n>but</span> <span class=n>the</span> <span class=n>above</span> <span class=n>benefits</span> <span class=n>come</span> <span class=n>at</span> <span class=n>a</span> <span class=n>cost</span> <span class=n>to</span> <span class=n>operations</span><span class=o>.</span> <span class=n>Blocking</span> <span class=n>systems</span> <span class=n>are</span> <span class=n>easy</span> <span class=n>to</span> <span class=n>grok</span> <span class=ow>and</span> <span class=n>debug</span><span class=o>.</span> <span class=n>A</span> <span class=n>thread</span> <span class=n>is</span> <span class=n>always</span> <span class=n>doing</span> <span class=n>a</span> <span class=n>single</span> <span class=n>operation</span> <span class=n>so</span> <span class=n>the</span> <span class=n>thread</span><span class=err>’</span><span class=n>s</span> <span class=n>stack</span> <span class=n>is</span> <span class=n>an</span> <span class=n>accurate</span> <span class=n>snapshot</span> <span class=n>of</span> <span class=n>the</span> <span class=n>progress</span> <span class=n>of</span> <span class=n>a</span> <span class=n>request</span> <span class=ow>or</span> <span class=n>spawned</span> <span class=n>task</span><span class=p>;</span> <span class=ow>and</span> <span class=n>a</span> <span class=n>thread</span> <span class=n>dump</span> <span class=n>can</span> <span class=n>be</span> <span class=n>read</span> <span class=n>to</span> <span class=n>follow</span> <span class=n>a</span> <span class=n>request</span> <span class=n>spanning</span> <span class=n>multiple</span> <span class=n>threads</span> <span class=n>by</span> <span class=n>following</span> <span class=n>locks</span><span class=o>.</span> <span class=n>An</span> <span class=n>exception</span> <span class=n>thrown</span> <span class=n>just</span> <span class=n>pops</span> <span class=n>up</span> <span class=n>the</span> <span class=n>stack</span><span class=o>.</span> <span class=n>A</span> <span class=err>“</span><span class=n>catch</span><span class=o>-</span><span class=n>all</span><span class=err>”</span> <span class=n>exception</span> <span class=n>handler</span> <span class=n>can</span> <span class=n>cleanup</span> <span class=n>everything</span> <span class=n>that</span> <span class=n>isn</span><span class=err>’</span><span class=n>t</span> <span class=n>explicitly</span> <span class=n>caught</span><span class=o>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Async</span><span class=p>,</span> <span class=n>by</span> <span class=n>contrast</span><span class=p>,</span> <span class=n>is</span> <span class=n>callback</span> <span class=n>based</span> <span class=ow>and</span> <span class=n>driven</span> <span class=n>by</span> <span class=n>an</span> <span class=n>event</span> <span class=n>loop</span><span class=o>.</span> <span class=n>The</span> <span class=n>event</span> <span class=n>loop</span><span class=err>’</span><span class=n>s</span> <span class=n>stack</span> <span class=n>trace</span> <span class=n>is</span> <span class=n>meaningless</span> <span class=n>when</span> <span class=n>trying</span> <span class=n>to</span> <span class=n>follow</span> <span class=n>a</span> <span class=n>request</span><span class=o>.</span> <span class=n>It</span> <span class=n>is</span> <span class=n>difficult</span> <span class=n>to</span> <span class=n>follow</span> <span class=n>a</span> <span class=n>request</span> <span class=n>as</span> <span class=n>events</span> <span class=ow>and</span> <span class=n>callbacks</span> <span class=n>are</span> <span class=n>processed</span><span class=p>,</span> <span class=ow>and</span> <span class=n>the</span> <span class=n>tools</span> <span class=n>to</span> <span class=n>help</span> <span class=n>with</span> <span class=n>debugging</span> <span class=n>this</span> <span class=n>are</span> <span class=n>sorely</span> <span class=n>lacking</span> <span class=ow>in</span> <span class=n>this</span> <span class=n>area</span><span class=o>.</span> <span class=n>Edge</span> <span class=n>cases</span><span class=p>,</span> <span class=n>unhandled</span> <span class=n>exceptions</span><span class=p>,</span> <span class=ow>and</span> <span class=n>incorrectly</span> <span class=n>handled</span> <span class=n>state</span> <span class=n>changes</span> <span class=n>create</span> <span class=n>dangling</span> <span class=n>resources</span> <span class=n>resulting</span> <span class=ow>in</span> <span class=n>ByteBuf</span> <span class=n>leaks</span><span class=p>,</span> <span class=n>file</span> <span class=n>descriptor</span> <span class=n>leaks</span><span class=p>,</span> <span class=n>lost</span> <span class=n>responses</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span> <span class=n>These</span> <span class=n>types</span> <span class=n>of</span> <span class=n>issues</span> <span class=n>have</span> <span class=n>proven</span> <span class=n>to</span> <span class=n>be</span> <span class=n>quite</span> <span class=n>difficult</span> <span class=n>to</span> <span class=n>debug</span> <span class=n>because</span> <span class=n>it</span> <span class=n>is</span> <span class=n>difficult</span> <span class=n>to</span> <span class=n>know</span> <span class=n>which</span> <span class=n>event</span> <span class=n>wasn</span><span class=err>’</span><span class=n>t</span> <span class=n>handled</span> <span class=n>properly</span> <span class=ow>or</span> <span class=n>cleaned</span> <span class=n>up</span> <span class=n>appropriately</span><span class=o>.</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=kong-vs-apisix><strong>Kong vs APISIX</strong></h3><p><img src=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong_vs_APISIX.png width=930 height=1159 srcset="/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong_vs_APISIX_hu_df92414906ab4608.png 480w, /p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B/Kong_vs_APISIX_hu_4419ec1e0d832e3a.png 1024w" loading=lazy class=gallery-image data-flex-grow=80 data-flex-basis=192px></p><h3 id=spring-cloud-gateway-vs-zuul2-vs-openresty-vs-kong><strong>Spring Cloud Gateway vs Zuul2 vs OpenResty vs Kong</strong></h3><div class=table-wrapper><table><thead><tr><th>网关</th><th>限流</th><th>鉴权</th><th>监控</th><th>易用性</th><th>可维护性</th><th>成熟度</th></tr></thead><tbody><tr><td>Spring Cloud Gateway</td><td>IP、用户、集群限流，提供相应接口扩展</td><td>普通鉴权、OAuth2.0</td><td>Gateway Metrics Filter</td><td>简单</td><td>Spring全家桶成员、扩展性强、易配置、易维护</td><td>成熟</td></tr><tr><td>Zuul2</td><td>配置文件，配置集群、单服务器限流、Filter扩展</td><td>Filter实现</td><td>Filter实现</td><td>-</td><td>-</td><td>-</td></tr><tr><td>OpenResty</td><td>Lua</td><td>Lua</td><td>需要开发</td><td>简单易用，但需要Lua开发</td><td>可维护性差</td><td>成熟</td></tr><tr><td>Kong</td><td>根据时间、用户限流。可在源码基础上开发http://coding.idealworld.group/2021/05/26/reflections-of-middle-platform-api-gateway-selection/</td><td>普通鉴权、OAuth2.0、Key Auth、HMAC</td><td>上报datadog，记录请求数量、数据量、应答数据量、接收发送时间间隔、状态码数量、Kong内耗时</td><td>简单易用，API转发通过管理接口配置。需要Lua开发</td><td>维护需要Lua</td><td>成熟</td></tr></tbody></table></div><h2 id=finally>Finally</h2><h3 id=kong>Kong</h3><ol><li>nginx + lua，开发不友好</li><li>仅支持PostgreSQL，增加运维成本，单点数据库</li><li>在不修改源码的情况下，无法自定义Nginx配置文件，重启后重新初始化所有变更的Nginx配置文件</li></ol><h3 id=apisix>Apisix</h3><ol><li>nginx + lua，开发不友好</li><li>待检验</li></ol><h3 id=zuul>Zuul</h3><ol><li>性能差，已有替代品</li></ol><h3 id=zuul2>Zuul2</h3><ol><li>性能好，但 Sprintg Cloud 没有兼容计划，与目前使用的技术栈结合的不是很好</li><li>还不太稳定</li></ol><h3 id=spring-cloud-gateway>Spring Cloud Gateway</h3><ol><li>性能比较好（not best）</li></ol><h2 id=结论>结论</h2><p>综合比较下来，Spring Cloud Gateway 性能好，也比较成熟稳定，并且是Spring全家桶成员，和当前项目是用的技术栈更匹配。)</p><h2 id=ref>Ref</h2><blockquote><p>ref: <a class=link href=https://spencergibb.netlify.app/preso/detroit-cf-api-gateway-2017-03/#/ target=_blank rel=noopener>The author of spring cloud gateway&rsquo;s PPT</a><br>ref: <a class=link href=https://microservices.io/patterns/apigateway.html target=_blank rel=noopener>What is api gateway</a><br>ref: <a class=link href=https://netflixtechblog.com/zuul-2-the-netflix-journey-to-asynchronous-non-blocking-systems-45947377fb5c target=_blank rel=noopener>Netflix blog: Zuul2</a><br>ref: <a class=link href=https://netflixtechblog.com/optimizing-the-netflix-api-5c9ac715cf19 target=_blank rel=noopener>Netflix blog: Optimizing the Netflix API</a><br>ref: <a class=link href=https://microservices.io/patterns/microservices.html target=_blank rel=noopener>Microservice Architecture</a><br>ref: <a class=link href=http://blog.itpub.net/31562044/viewspace-2651041/ target=_blank rel=noopener>百亿流量微服务网关的设计与实现</a><br>ref: <a class=link href=http://coding.idealworld.group/2021/05/26/reflections-of-middle-platform-api-gateway-selection/ target=_blank rel=noopener>中台反思：云原生下API网关的选择</a><br>ref: <a class=link href=https://www.yihuo.tech/news/api-gateways-apache-apisix-and-kong-selection-comparison/ target=_blank rel=noopener>API 网关 Apache APISIX 和 Kong 的选型对比</a><br>ref: <a class=link href=https://blog.csdn.net/star1210644725/article/details/113399714 target=_blank rel=noopener>API网关架构与技术选型</a><br>ref: <a class=link href=https://www.daimajiaoliu.com/daima/47973c73d100400 target=_blank rel=noopener>API网关介绍及选型(kong)</a><br>ref: <a class=link href=https://wakzz.cn/2021/03/06/%E6%9E%B6%E6%9E%84/API%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B%E8%B0%83%E7%A0%94/ target=_blank rel=noopener>API网关选型调研</a><br>ref: <a class=link href=https://www.cnblogs.com/wtzbk/p/14009219.html target=_blank rel=noopener>微服务下的网关如何选择(提到了soul)</a><br>ref: <a class=link href=https://www.infoq.cn/article/comparing-api-gateway-performances/ target=_blank rel=noopener>API 网关性能比较：NGINX vs. ZUUL vs. Spring Cloud Gateway vs. Linkerd</a><br>ref: <a class=link href=https://juejin.cn/post/6882952033712734216 target=_blank rel=noopener>API 网关选型及包含 BFF 的架构设计</a><br>ref: <a class=link href=https://www.jianshu.com/p/a2f292221b5c target=_blank rel=noopener>5、微服务网关</a><br>ref: <a class=link href=https://www.zhihu.com/question/280850489 target=_blank rel=noopener>如何评价 spring cloud gateway? 对比 zuul2.0 主要的优势是什么?</a><br>ref: <a class=link href=https://www.jianshu.com/p/ebe4636a13aa target=_blank rel=noopener>如何选择和设计微服务网关</a><br>ref: <a class=link href=https://www.apiseven.com/zh/blog/why-we-need-Apache-APISIX target=_blank rel=noopener>有了 NGINX 和 Kong，为什么还需要 Apache APISIX</a><br>ref: <a class=link href=https://zhuanlan.zhihu.com/p/109458069 target=_blank rel=noopener>浅谈 k8s ingress controller 选型</a></p></blockquote></section><footer class=article-footer><section class=article-tags><a href=/tags/%E6%9E%B6%E6%9E%84/>架构</a>
<a href=/tags/%E7%BD%91%E5%85%B3/>网关</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/%E7%BD%91%E5%85%B3%E9%80%89%E5%9E%8B%E7%BB%86%E8%8A%82/><div class=article-details><h2 class=article-title>网关选型细节</h2></div></a></article><article><a href=/p/why-reactor/><div class=article-details><h2 class=article-title>Why Reactor</h2></div></a></article><article><a href=/p/callback-or-messagequeue/><div class=article-details><h2 class=article-title>Callback Or MessageQueue</h2></div></a></article><article><a href=/p/seda-the-staged-event-driven-architecture/><div class=article-details><h2 class=article-title>Seda - The Staged Event-Driven Architecture</h2></div></a></article><article><a href=/p/why-events-are-a-bad-idea/><div class=article-details><h2 class=article-title>Why events are a bad idea</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//weasley.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Kunkka</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>